# Arduino IDE로 복구

```
1. Arduino IDE 2.3.2 다운로드
   https://www.arduino.cc/en/software

2. 설치 및 실행

3. File → Preferences
   Additional boards manager URLs:
   https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json

4. Tools → Board → Boards Manager
   "esp32" 검색 → 설치 (약 250MB)

5. Tools → Board → Arduino Nano ESP32

6. Tools → Port → COM9

7. File → Examples → 01.Basics → Blink

8. Upload 버튼 클릭 (→)

9. 업로드 완료 후 LED 즉시 관찰
```

# 오류
```
Sketch uses 286157 bytes (9%) of program storage space. Maximum is 3145728 bytes.
Global variables use 30552 bytes (9%) of dynamic memory, leaving 297128 bytes for local variables. Maximum is 327680 bytes.
dfu-util 0.11-arduino4
```

# 여기서부터는 platformIO에서

platformio.ini
```
[env:arduino_nano_esp32]
platform = espressif32
board = arduino_nano_esp32
framework = arduino

; ===== 업로드 설정 (esptool 사용) =====
upload_protocol = esptool
upload_port = COM9
upload_speed = 115200        ; 낮은 속도로 안정성 확보

; ===== 모니터 설정 =====
monitor_port = COM10
monitor_speed = 115200

; ===== CDC 활성화 =====
build_flags = 
  -DARDUINO_USB_CDC_ON_BOOT=1
  -DARDUINO_USB_MODE=1

; ===== 중요: 파티션 설정 없음 =====
; board_build.partitions는 주석 처리 또는 삭제

; ===== 사용 방법 =====
; 1. pio run -t erase --upload-port COM9
; 2. pio run -t upload --upload-port COM9
;    (Connecting... 나타나면 BOOT 버튼 누르기)
; 3. 업로드 완료 후 RST 버튼 누르기
; 4. LED 확인
```

main.cpp
```
#include <Arduino.h>

void setup() {
  pinMode(LED_BUILTIN, OUTPUT);
  
  // 부팅 신호
  for(int i = 0; i < 10; i++) {
    digitalWrite(LED_BUILTIN, HIGH);
    delay(50);
    digitalWrite(LED_BUILTIN, LOW);
    delay(50);
  }
}

void loop() {
  digitalWrite(LED_BUILTIN, HIGH);
  delay(500);
  digitalWrite(LED_BUILTIN, LOW);
  delay(500);
}
```

# 실행 순서 (BOOT 버튼 사용)

## Step 1: 준비
bash# 터미널에서 실행 (Enter 누르지 말 것!)
pio run -t upload --upload-port COM9

## Step 2: BOOT 모드 진입
명령을 실행하면 "Connecting..."이 나타납니다.

즉시:

BOOT 버튼을 누른 채로 유지
RST 버튼을 눌렀다 뗌
BOOT 버튼을 계속 누름
"Writing at 0x00000000..." 나타나면 BOOT 버튼 놓기

## Step 3: 업로드 완료 확인
Hash of data verified.
Leaving...
Hard resetting via RTS pin...

## Step 4: RST 버튼 누르기
업로드 완료 후 보드의 RST 버튼을 수동으로 한 번 누르세요.

## Step 5: LED 즉시 관찰
RST 후 2-3초 이내에:

빠른 깜빡임 10회 (setup)
천천히 깜빡임 (loop)

## 시험 결과는 위의 명령 실행 후 아무것도 하지 않아도 자동이로 Step 5 진행되네.
## 그럼 default partition 복구되었는가?