# 드론 조종 4축 제어 설명

## 개요
드론은 4개의 기본 조종 축(Throttle, Yaw, Roll, Pitch)을 사용하여 3차원 공간에서 비행합니다.

---

## 1. Throttle (스로틀) - 상승/하강

### 정의
- **수직 이동 제어**
- 모든 모터의 회전 속도를 동시에 증가/감소

### 동작
- **증가 (Up)**: 모든 프로펠러 속도 ↑ → 드론 상승
- **감소 (Down)**: 모든 프로펠러 속도 ↓ → 드론 하강
- **중립**: 현재 고도 유지 (호버링)

### 값 범위
- **0.0 ~ 1.0** (정규화 값)
- 0.0 = 최소 (착륙/하강)
- 1.0 = 최대 (상승)

### 조이스틱
- **왼쪽 조이스틱 Y축** (상하)

---

## 2. Yaw (요) - 회전

### 정의
- **수평 회전 제어**
- Z축(수직축)을 중심으로 회전
- 드론의 방향(기수 방향) 변경

### 동작
- **좌회전**: 좌측 모터 속도 ↑, 우측 모터 속도 ↓
- **우회전**: 우측 모터 속도 ↑, 좌측 모터 속도 ↓
- **중립**: 회전 없음 (현재 방향 유지)

### 값 범위
- **-1.0 ~ +1.0** (정규화 값)
- -1.0 = 최대 좌회전
- 0.0 = 회전 없음
- +1.0 = 최대 우회전

### 조이스틱
- **왼쪽 조이스틱 X축** (좌우)

### 물리 원리
프로펠러의 반작용 토크를 이용:
- 대각선 모터쌍이 동일 방향으로 회전
- FL + RR (시계방향) vs FR + RL (반시계방향)

---

## 3. Roll (롤) - 좌우 기울임

### 정의
- **좌우 이동 제어**
- X축(전후축)을 중심으로 회전
- 드론을 좌우로 기울여 이동

### 동작
- **왼쪽 기울임**: 좌측 모터 속도 ↓, 우측 모터 속도 ↑
  - 드론이 왼쪽으로 기울어져 왼쪽으로 이동
- **오른쪽 기울임**: 우측 모터 속도 ↓, 좌측 모터 속도 ↑
  - 드론이 오른쪽으로 기울어져 오른쪽으로 이동
- **중립**: 수평 유지

### 값 범위
- **-1.0 ~ +1.0** (정규화 값)
- -1.0 = 최대 왼쪽 기울임
- 0.0 = 수평
- +1.0 = 최대 오른쪽 기울임

### 조이스틱
- **오른쪽 조이스틱 X축** (좌우)

---

## 4. Pitch (피치) - 전후 기울임

### 정의
- **전후 이동 제어**
- Y축(좌우축)을 중심으로 회전
- 드론을 앞뒤로 기울여 이동

### 동작
- **전진 기울임**: 전방 모터 속도 ↓, 후방 모터 속도 ↑
  - 드론이 앞으로 기울어져 전진
- **후진 기울임**: 후방 모터 속도 ↓, 전방 모터 속도 ↑
  - 드론이 뒤로 기울어져 후진
- **중립**: 수평 유지

### 값 범위
- **-1.0 ~ +1.0** (정규화 값)
- -1.0 = 최대 후진 기울임
- 0.0 = 수평
- +1.0 = 최대 전진 기울임

### 조이스틱
- **오른쪽 조이스틱 Y축** (상하)

---

## 모터 믹싱 (Motor Mixing)

4개 입력을 4개 모터 출력으로 변환하는 방식:
모터 배치:
전방
FL    FR
↑
RL    RR
후방
모터 출력 계산:
FL = Throttle - Roll + Pitch - Yaw
FR = Throttle + Roll + Pitch + Yaw
RL = Throttle - Roll - Pitch + Yaw
RR = Throttle + Roll - Pitch - Yaw

### 예시 1: 상승만 (Throttle = 0.5)
FL = 0.5 - 0 + 0 - 0 = 0.5
FR = 0.5 + 0 + 0 + 0 = 0.5
RL = 0.5 - 0 - 0 + 0 = 0.5
RR = 0.5 + 0 - 0 - 0 = 0.5
→ 모든 모터 동일 속도로 상승

### 예시 2: 우측 회전 (Yaw = +0.3)
FL = Base - 0 + 0 - 0.3 = Base - 0.3
FR = Base + 0 + 0 + 0.3 = Base + 0.3
RL = Base - 0 - 0 + 0.3 = Base + 0.3
RR = Base + 0 - 0 - 0.3 = Base - 0.3
→ 대각선 모터쌍이 다른 속도로 회전

---

## 비행 모드별 차이

### 1. STABILIZE (안정화 모드)
- 조종 입력 → **목표 각도**
- Roll/Pitch: 최대 각도 제한 (±30°)
- 스틱 놓으면 자동으로 수평 복귀

### 2. ANGLE (각도 모드)
- STABILIZE와 유사
- 더 엄격한 각도 제한

### 3. ACRO (곡예 모드)
- 조종 입력 → **목표 회전 속도**
- 각도 제한 없음
- 스틱 놓아도 현재 자세 유지
- 고급 조종사용

---

## 좌표계

### 드론 기준 (Body Frame)
    전방 (Pitch +)
          ↑
          |
좌 ←------+------→ 우
(Roll -)  |    (Roll +)
          |
          ↓
    후방 (Pitch -)

 상승 (Throttle +)
    ⊙ (Yaw 회전)
 하강 (Throttle -)

### 축 정의
- **X축**: 전후 방향 (Roll 회전축)
- **Y축**: 좌우 방향 (Pitch 회전축)
- **Z축**: 상하 방향 (Yaw 회전축)

---

## 실제 비행 예시

### 전진 비행
1. Throttle: 0.6 (고도 유지)
2. Pitch: +0.3 (앞으로 기울임)
3. Roll: 0 (수평 유지)
4. Yaw: 0 (방향 유지)

### 좌측 전진 비행
1. Throttle: 0.6
2. Pitch: +0.3 (전진)
3. Roll: -0.2 (좌측 기울임)
4. Yaw: 0

### 제자리 회전
1. Throttle: 0.5 (고도 유지)
2. Pitch: 0
3. Roll: 0
4. Yaw: +0.5 (우회전)

---

## 요약 테이블

| 축 | 제어 대상 | 방향 | 조이스틱 | 범위 | 물리적 효과 |
|----|-----------|------|----------|------|-------------|
| **Throttle** | 고도 | 수직 | 좌측 Y | 0~1 | 모든 모터 동시 증감 |
| **Yaw** | 방향 | 회전 | 좌측 X | -1~+1 | 대각선 모터쌍 차등 |
| **Roll** | 좌우 이동 | 좌우 기울임 | 우측 X | -1~+1 | 좌우 모터 차등 |
| **Pitch** | 전후 이동 | 전후 기울임 | 우측 Y | -1~+1 | 전후 모터 차등 |

---

## 참고
- Throttle만 0~1 범위 (항상 양수)
- Yaw, Roll, Pitch는 -1~+1 범위 (양방향)
- 실제 모터 출력은 1000~2000 μs (PWM)
- PID 제어기가 목표값과 실제값의 차이를 보정

---

## 작성일
2025-10-05

## 버전
1.0
